<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 7</title>
    <style>
        #error {
            background-color: lightcoral;
            color: red;
        }
    </style>
</head>
<body>
    <!-- <form action="signup.php" method="POST"> -->
    <h3 id ="error"></h3>
    <form>
    <!--  <input type="text" name="username" placeholder="Username"
    required> -->
    <select id="username" type="text" name="username" placeholder="Username"
      required>
     <!-- <option>123456</option>
    </select>  -->
    <input type="password" name="password" 
      placeholder="Password" required>
    <button type="button" name="signup" onclick="sign_up()">Sign Up</button>
    </form>
    <script>
        function sign_up() {
            fetch('./api/signup.php', body={
                'username': document.getElementById('username').value,
                'password': document.getElementById('password').value
            })
            .then((response)=>{
                if (response.status == 201) {
                    location.href = 'signin.html';
                }  
                else {
                    response.json();
                    })
                    .then((data)=>{
                    document.getElementById('error').innerHTML = data['message'];
                }  
            })
        }

        fetch('./api/student-id.php')
        .then((response)=>response.json())
        .then((data)=>{
        //    console.log(data);
        let options = '';
        for (let id of data) {
            options += `<option>${id['studentID']}</option>`;
        }
        document.getElementById('username').innerHTML = options;
        });
    </script>
</body>
</html>